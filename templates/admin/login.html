{% extends 'base.html' %}
{% load static i18n %}
{% block title %}Login | {{ site_header|default:_('Administração do Django') }}{% endblock %}
{% block content %}
<div class="registration-container">
    <div class="registration-panel">
        <h1 class="page-title" style="margin-bottom: 30px;">
            Acesso Administrativo
        </h1>
        <form method="post" id="loginForm" action="{{ app_path }}">
            {% csrf_token %}
            {% if form.non_field_errors %}
            <div class="form-errors" style="color: #ff9999; margin-bottom: 15px;">
                {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}
            <div class="form-group">
                <label for="{{ form.username.id_for_label }}">{% trans 'Username' %}</label>
                {{ form.username }}
            </div>
            <div class="form-group">
                <label for="{{ form.password.id_for_label }}">{% trans 'Password' %}</label>
                {{ form.password }}
            </div>
            <button type="submit" id="loginButton" class="grid-item dark" style="width: 60%; max-width: 300px; margin: 50px auto 0 auto;">
                {% trans 'Log in' %}
            </button>
            <input type="hidden" name="next" value="{{ next }}">
        </form>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const usernameInput = document.getElementById('id_username');
        const passwordInput = document.getElementById('id_password');
        const loginButton = document.getElementById('loginButton');
        function checkInputState(input) {
            if (input) {
                input.classList.toggle('filled', input.value.length > 0);
            }
        }
        function checkForm() {
            checkInputState(usernameInput);
            checkInputState(passwordInput);
        }
        if (usernameInput && passwordInput) {
            usernameInput.addEventListener('input', checkForm);
            passwordInput.addEventListener('input', checkForm);
            checkForm();
        }
    });
</script>
{% endblock %}